---
title: MIT 线性代数公开课笔记（二）
date: 2024-02-18 13:52:33
categories: 
  - [数学, 3d数学基础]
  - [数学, 线性代数]
tags:
  - 游戏开发
  - 数学
  - 线性代数
top_img: /images/black.jpg
cover: https://s2.loli.net/2024/02/18/6rKVn5pm3sXlxS8.gif
mathjax: true
---

> 该笔记主要内容为XXXXXXXXXXXXX；
> 该笔记主要参考了 MLNLP 的关于该公开课的 GitHub 公开项目的笔记：<https://github.com/MLNLP-World/MIT-Linear-Algebra-Notes>  
> 公开课 B 站 bv 号：BV16Z4y1U7oU


# 第十四课 正交向量与正交子空间

<div  align="center">  
<img src="https://s2.loli.net/2024/02/18/iwvTI9XHNrf4QjB.png" width = "60%" height = "60%" alt="图4 - 四个子空间的关系"/>
</div>

## 向量正交
**正交 Orthogonal **就是**垂直 perpendicular** 的另一种说法。两向量正交的判据之一是其点积 $\,x^Ty = y^Tx = 0\,$。

可以根据勾股定理（毕达哥拉斯定理 Pythagorean theorem）推出上述判断，当两个向量的夹角为 90 度时，x，y 满足：  

$$ |x|^2 + |y|^2 = |x + y|^2 $$

其中 $\,|x|^2 = x^Tx\,$（x 为 列向量），可得：

$$ x^Tx + y^Ty = (x + y)^T(x + y) = x^Tx + y^Ty + x^Ty + y^Tx$$

可得 $\,x^Ty + y^Tx = 0\,$，因 $\,x^Ty\,$ 与 $\,y^Tx\,$ 其实是一样的，都表示两个一维向量的点乘，故若两个向量正交，则 $\,x^Ty = y^Tx = 0\,$。

> 零向量与所有向量都正交。

## 子空间正交
**两个子空间正交**就是：**一个子空间中的任意一个向量，都与另一个子空间中的任意一个向量正交。**

在三维空间中，假设世界原点为黑板和地板交接处的一点，黑板所在的平面（子空间）和地板所在平面（子空间）不是正交关系，沿两者的交线方向的向量同时属于两个平面，但并不与自己正交。即两个平面在某一非零向量处相交，那这两个平面一定不正交，因为相交处的这个非零向量无法满足空间正交定义。

再从子空间角度看一看正交空间，以 $\,R^2\,$ 的子空间为例，一个平面上的子空间有三种：  
①整个平面 D；  
②过原点的直线 L；  
③原点 O。

看一看这些子空间之间的正交，以 L 为例：  
①L 与 D 什么时候正交？  
一个平面上的直线不可能与这个平面垂直；  
②L 什么时候与 O 正交？  
L 与 O 永远是正交的；  
③L 什么时候与另一个 L 正交？  
由正交的定义，两条直线在原点处互相垂直，这两个 L 空间才正交。

## 零空间与行空间的正交关系 
零空间与行空间之间是正交的，得到这个结论并不难，我们把 A 写成行向量形式，再看 Ax = 0 这个方程：  

$$ \begin{bmatrix} R_1 \\ R_2 \\ ... \\ ... \\ R_m \end{bmatrix} \begin{bmatrix} x_1 \\ x_2 \\ ... \\ ... \end{bmatrix} = \begin{bmatrix} R_1(x_1, x_2, ...) \\ R_2(x_1, x_2, ...) \\ ... \\ ... \\ R_m(x_1, x_2, ...) \end{bmatrix} = \begin{bmatrix} 0 \\ 0 \\ ... \\ ... \\ 0 \end{bmatrix} $$

x 与矩阵 A 的行向量点积都等于 0，则它和矩阵 A 行向量的线性组合进行点积也为 0，所以 x 与 A 的行空间正交。x 为零空间内的任意向量，所以零空间与行空间正交。同理可以证明列空间与左零空间正交。

---

行空间和零空间类似于把 $\,R^n\,$ 空间分割成了两个正交的子空间。例如对于矩阵：$\,A = \begin{bmatrix} 1 & 2 & 5 \\ 2 & 4 & 10 \end{bmatrix}\,$，其行空间是 1 维的，向量 (1, 2, 5) 是它的基向量，而其零空间是垂直于 (1, 2, 5) 并穿过原点的二维平面。行空间和零空间不仅仅是正交，并且其维数之和等于 n，我们称行空间和零空间为 $\,R^n\,$ 空间内的**正交补 orthogonal complements**。这表示零空间包含所有和行空间正交的向量，反之亦然。

> 想想我们之前提到的黑板和地板平面不是正交子空间的例子，二者都在三维空间中，分别为二维空间，因此不可能正交。一个空间中正交子空间的维数之和不可能超过原空间的维数。

## 无解方程的最优解
下面讨论如何求解一个无解方程组 Ax = b 的解（引出下一节的内容）。矩阵的数据来源于实际测量，那么就势必会有测量不准确的时候，如果 A 是长方形矩阵，m 大于 n。当左侧方程数特别多的时候，容易混入“坏”数据，方程变得无解。但是对于数据的可信度我们无从判断，线性代数要做的就是在这种条件下求一个方程的“最优解”。矩阵 $\,A^TA\,$ 会发挥重要作用，它是一个 n x n 方阵，并且是对称矩阵。

将方程改写成：$\,A^TA \hat {x} = A^Tb\,$，即求解 $\,\hat {x}\,$ 这个最优解。我们利用了 $\,A^TA\,$ 矩阵的特殊性质如下：  
①设 A 为 m × n 矩阵，则 $\,A^TA\,$ 为 n × n 矩阵；  
②$\,A^TA\,$，总为对称矩阵。$\,(A^TA)^T = A^TA\,$，故 $\,A^TA\,$ 总是对称的。

有一点需要注意，$\,A^TA\,$ 矩阵不一定总是可逆的，所以在求解时要注意 A 的特点。很明显，当 A 矩阵列向量线性相关时候，$\,A^TA\,$ 就不可逆了。因此若要 $\,A^TA\,$ 矩阵可逆，则要求 A 的零空间只有零向量，即 A 的列向量线性无关。


# 第十五课 子空间投影
这节主要讲**投影 projection**，从向量的投影入手，延伸到高维投影，并将投影用矩阵形式给出。做投影即是向另一个向量上做垂线，跟上节课的正交有联系。

## 向量投影

<div  align="center">  
<img src="https://s2.loli.net/2024/02/19/xU4EQOj73XNgM2F.jpg" width = "50%" height = "50%" alt="图5 - 向量投影"/>
</div>

投影问题的几何解释就是：如何在向量 a 的方向上寻找与向量 b 距离最近的一点。从图中可以看出，这个距离最近的点 p 就位于穿过 b 点并与向量 a 正交的直线与向量 a 所在直线的交点，即 b 在 a 上的投影。

> 如果我们将向量 p 视为 b 的一种近似，则长度 e = b - p 就是这一近似的误差。

因为 p 在向量 a 的方向上，因此可以令 p = xa，而因为它和 e 正交，我们可以得到方程：  

$$ a^Te = a^T(b - p) = a^T(b - xa) = 0 $$

可得：  

$$ x = \frac {a^Tb} {a^Ta}, p = xa = a \frac {a^Tb} {a^Ta} $$

如果 b 变为原来的 2 倍，则 p 也变为原来的 2 倍。而如果 a 变为原来的 2 倍，p 不发生变化。从几何上和计算中都会得到验证。

## 投影矩阵
接下来我们将投影问题用投影矩阵的方式进行描述，即 $\,p = Pb\,$，其中 $\,P\,$ 为投影矩阵。

根据 $\,p = xa = a \frac {a^Tb} {a^Ta}\,$，可知 $\,P = \frac {aa^T} {a^Ta}\,$，注意当 a 是列向量时，分母 $\,a^Ta\,$ 是一个数，分子 $\,aa^T\,$ 是一个矩阵。

观察这个矩阵可知，因为 a 是列向量，$\,aa^T\,$ 得到的必然是秩一矩阵，矩阵 P 的列空间就是向量 a 所在的直线，矩阵 P 的秩为 1。同样，投影矩阵 P 是一个对称矩阵，即 $\,P^T = P\,$；另一方面，如果投影两次，第二次投影还在原来的位置，即 $\,P^2 = P\,$。

## Why Project
如上一节结尾所述，方程 Ax = b 有可能无解，我们需要得到方程的“最优解”。这里的问题在于向量 Ax 一定在矩阵 A 的列空间之内，但是 b 不一定，因此我们希望将 b 投影到 A 的列空间得到 p，将问题转化为 $\,A\hat {x} = p\,$。

## 平面投影

<div  align="center">  
<img src="https://s2.loli.net/2024/02/19/7uG81TXxNLzUKnQ.jpg" width = "50%" height = "50%" alt="图6 - 平面投影"/>
</div>

$\,a_1\,$，$\,a_2\,$ 构成平面的一组基，平面是矩阵 $\,A = \begin{bmatrix} a_1 & a_2\end{bmatrix}\,$ 的列空间。

p 在平面上，即 $\,p = \hat {x_1} a_1 + \hat {x_2} a_2\,$，即 $\,p = A\hat {x}\,$。

而 $\,e = b - p = b - A \hat {x}\,$ 与投影平面正交，也就是 $\,e\,$ 与 $\,a_1\,$ 和 $\,a_2\,$ 均正交，可得 $\,a_1^T(b - A \hat {x}) = 0\,$ 和 $\,a_2^T(b - A \hat {x}) = 0\,$。

因为 $\,a_1\,$ 和 $\,a_2\,$ 分别为矩阵 A 的列向量，即 $\,a_1^T\,$ 和 $\,a_2^T\,$ 为矩阵 $\,A^T\,$ 的行向量，所以将两个方程式写成矩阵形式即为 $\,A^T(b - A \hat {x}) = 0\,$，这与一维投影的方程形式相同，一维投影只是 A 只有一列的情况下。

$\,A^T(b - A \hat {x}) = 0\,$ 这个公式说明了，向量 $\,e = b - A \hat {x}\,$ 存在于矩阵 $\,A^T\,$ 的零空间 $\,N(A^T)\,$ ，即 e 向量与 $\,A^T\,$ 的行向量正交，也就与 A 的列向量正交。

--- 

将方程 $\,A^T(b - A \hat {x}) = 0\,$ 改写，可得 $\,A^TA \hat {x} = A^Tb\,$，也就是上一节结尾的公式。

我们要注意一点：不能直接在两边左乘 $\,(A^T)^{-1}\,$。因为 $\,A^T\,$ 不一定是方阵，不一定有逆矩阵。但是这里 A 为两个基向量构成的矩阵，两个基向量线性无关，根据上节的知识，$\,A^TA\,$是可逆的。在两侧同时左乘 $\,(A^TA)^{-1}\,$：

$$ \hat x = (A^TA)^{-1} A^T b $$

代入 $p = A \hat {x}$：  

$$ p = A \hat x = A(A^TA)^{-1} A^T b $$

即投影矩阵为：  

$$ P =  A(A^TA)^{-1} A^T $$

可以看出，之前一维的 $\,P = \frac {aa^T} {a^Ta}\,$ 是上式的特殊情况。

因为矩阵 A 不是方阵，无法简单地用 $\,(A^TA)^{-1} = A^{-1}(A^T)^{-1}\,$ 对投影矩阵进行化简。若 A 是可逆方阵，则化简得到 P = I。此时 A 的列空间就是整个 $\,R^n\,$ 空间，b 到这个空间的投影就是其本身，投影矩阵等于单位阵。

对 $\,P =  A(A^TA)^{-1} A^T\,$ 用矩阵乘法的结合律和矩阵乘积的转置公式，可以证明投影矩阵的性质：$\,P^T = P\,$，$\,P^2 = P\,$。

## 最小二乘法 Least Squares 初涉
应用投影矩阵求方程组最优解的方法，最常用于“最小二乘法”拟合曲线。

例如：求解三个点（1，1），（2,2），（3，2）拟合的直线方程

我们假设最优直线方程：b = C + Dt，代入三个点列出方程。

$$ C + D = 1 $$
$$ C + 2D = 2 $$
$$ C + 3D = 2 $$

矩阵形式为：

$$ \begin{bmatrix} 1 & 1 \\ 1 & 2 \\ 1 & 3 \end{bmatrix} \begin{bmatrix} C \\ D \end{bmatrix} = \begin{bmatrix} 1 \\ 2 \\ 2 \end{bmatrix} $$

这个的方程 Ax = b 是无解的，解决办法就是求其最优解，即方程 $\,A^TA \hat {x} = A^Tb\,$ 的解。

最小二乘法下节还会详述。


# 第十六课 投影矩阵和最小二乘法
## 投影矩阵回顾
上一节中介绍过投影矩阵 P，即：  

$$ P = A(A^TA)^{-1}A^T $$

投影矩阵 P 与一向量 b 的乘积可以理解为：将 b 向量投影到它在列空间中的最近一点上，类似于上节课中，将 p 投影到平面上的过程。

两个问题：  

①如果 b 在矩阵 A 的列空间里，则 Pb = ？  

此时 Pb = b，因为 b 本身就在 A 列空间中。b 在 A 的列空间里，就一定可以写成：$\,Ax = b\,$。代入投影矩阵：$\,A(A^TA)^{-1}A^TAx = A(A^TA)^{-1}(A^TA)x = Ax = b\,$

②如果 b 垂直于 A 的列空间，则 Pb = ？
此时 Pb = 0，此时没有投影。b 垂直于 A 的列空间，也就垂直于 A 的所有列向量，故 b 在左零空间中，即 $\,A^Tb = 0\,$。代入投影矩阵：$\,A(A^TA)^{-1}A^Tb = A(A^TA)^{-1}0 = 0\,$

通过上面两个问题，我们可以看出来，一个向量 b 总有两个分量，一个分量在 A 的列空间中，另一个分量垂直于 A 的列空间。而投影矩阵的作用就是保留列空间中的那个分量，拿掉垂直于列空间的分量。

<div  align="center">  
<img src="https://s2.loli.net/2024/02/21/iTJeK6R5ts7OSVL.jpg" width = "30%" height = "30%" alt="图7 - 投影矩阵的理解"/>
</div>

$\,b = p + e\,$，p 就是投影矩阵作用于 b 上得到的向量，而 e 这个左零空间中的分量，如果也用类似投影矩阵来表示的话，就是：$\,p = Pb\,$，$\,e = b - p = b - Pb = (I - P)b \,$。$\,I-P\,$可以看作是左零空间的投影矩阵，并且 $\,(I - P)^T = I - P\,$，$\,(I - P)^2 = I - P\,$。

## 最小二乘法
接着上节课的例子：  

$$ \begin{bmatrix} 1 & 1 \\ 1 & 2 \\ 1 & 3 \end{bmatrix} \begin{bmatrix} C \\ D \end{bmatrix} = \begin{bmatrix} 1 \\ 2 \\ 2 \end{bmatrix} $$

这个的方程 Ax = b 是无解的，解决办法就是求其最优解，最优解的含义即为直线与各点之间的误差（偏移量）最小，为了便于计算，研究它们的平方和：$\,|e|^2 = |Ax - b|^2\,$，因此就是寻找具有最小误差平方和的解 x，这就是所谓的“最小二乘”问题。

<div  align="center">  
<img src="https://s2.loli.net/2024/02/21/bdhuCi1Zo9qctK2.jpg" width = "30%" height = "30%" alt="图8 - 误差"/>
</div>

从几何上讨论求解过程，就是试图寻找数据点到直线距离的平方和 $\,e_1^2 + e_2^2 + e_3^2\,$ 最小的情况。另一种看法是，对于 $\,R^3\,$ 空间上的向量 b，它投影到矩阵 A 的列空间中会得到向量 p = [p1 p2 p3]，投影到矩阵 A 的左零空间中则为 e。

计算如下，使用上节课中我们介绍的方程：  

$$ A^TA \hat {x} = A^Tb $$

对应方程：$\,\begin{bmatrix} 1 & 1 \\ 1 & 2 \\ 1 & 3 \end{bmatrix} \begin{bmatrix} C \\ D \end{bmatrix} = \begin{bmatrix} 1 \\ 2 \\ 2 \end{bmatrix}\,$，其中 $\,A = \begin{bmatrix} 1 & 1 \\ 1 & 2 \\ 1 & 3 \end{bmatrix}\,$，$\,\hat x = \begin{bmatrix} \hat c \\ \hat d \end{bmatrix}\,$，$\,b = \begin{bmatrix} 1 \\ 2 \\ 2 \end{bmatrix}\,$。

其中 $\,A \hat {x} = b\,$ 可以写成增广矩阵模式，故 $\,A^TA \hat {x} = A^Tb\,$ 可以写成：

$$ \begin{bmatrix} 1 & 1 & 1 \\ 1 & 2 & 3 \end{bmatrix} \left[ \begin{array}{cc|c} 1 & 1 & 1 \\ 1 & 2 & 2 \\ 1 & 3 & 2 \end{array} \right] = \left[ \begin{array}{cc|c} 3 & 6 & 5 \\ 6 & 14 & 11 \end{array} \right] $$

即有：  

$$ \begin{bmatrix} 3 & 6 \\ 6 & 14 \end{bmatrix} \begin{bmatrix} \hat {C} \\ \hat {D} \end{bmatrix} = \begin{bmatrix} 5 \\ 11 \end{bmatrix} $$

解得：

$$ \hat {C} = 2/3，\hat {D} = 1/2 $$

得到直线表达式 y = 2/3 + t/2。

还可以从误差最小的角度出发求解：  

$$ e_1^2 + e_2^2 + e_3^2 = (C + D - 1)^2 + (C + 2D - 2)^2 + (C + 3D - 2)^2 $$

对等号右边的表达式求偏导数，极值出现在偏导数为 0 的位置。求偏导最终会得到相同的线性方程组和相同的解。

得到直线表达式 y = 2/3 + t/2。将 t = 1, 2, 3 分别代入，以及 b = p + e 可得：  

$$ b = \begin{bmatrix} 1 \\ 2 \\ 2 \end{bmatrix}, p = \begin{bmatrix} 7/6 \\ 10/6 \\ 13/6 \end{bmatrix}, e = \begin{bmatrix} -1/6 \\ 2/6 \\ -1/6 \end{bmatrix} $$

得到如下性质：  
①误差向量与投影向量 p 垂直（二者点乘为 0）  
②误差向量不仅仅垂直于 p，它还垂直于列空间中的每一个向量。

## 矩阵 $\,A^TA\,$
之前有一个结论没有验证过：如果矩阵 A 各列线性无关，则矩阵 $\,A^TA\,$ 可逆。

引入之前几节的结论：如果矩阵可逆，则其对应的零空间仅为零向量。$\,x^Tx\,$ 对应是在求 x 的长度（x 是列向量）。如果 $\,x^Tx = 0\,$，则 x = 0（x 是列向量）。

假设存在 x 使得 $\,A^TAx = 0\,$。则有 $\,x^TA^TAx = 0 = (Ax)^T(Ax)\,$，可推得 Ax = 0，因为 A 各列线性无关，所以也就推得了 x 必为零向量。即 $\,A^TA\,$ 为可逆矩阵。

## 标准正交基
这部分是引出下节的部分，内容较少：

如果矩阵的列向量是互相垂直的单位向量，则它们一定是线性无关的。我们将这种向量称之为**标准正交 orthonormal**。

例如：$\,\begin{bmatrix} 1 \\ 0 \\ 0 \end{bmatrix}\,$，$\,\begin{bmatrix} 0 \\ 1 \\ 0 \end{bmatrix}\,$，$\,\begin{bmatrix} 0 \\ 0 \\ 1 \end{bmatrix}\,$，以及 $\,\begin{bmatrix} \cos \theta \\ \sin \theta \end{bmatrix}\,$ 和 $\,\begin{bmatrix} -\sin \theta \\ \cos \theta \end{bmatrix}\,$。


# 第十七课 正交矩阵和施密特正交化
## 标准正交向量 Orthonormal vectors
满足如下条件的向量 $\,q_1, q_2, q_3\,$ 为标准正交：  

$$ q_i^Tq_j = \begin{cases} 0 & i \ne j \\[2ex] 1 & i = j \end{cases} $$

即，这些向量都具有单位长度 1，并且彼此正交。标准正交向量是线性无关的。

## 标准正交矩阵 Orthonormal matrix
所谓标准正交矩阵 Q，就是将标准正交向量组中的 $\,q_1, q_2 ··· q_n\,$ 列在同一个
矩阵中：  

$$ Q = \begin{bmatrix} q_1 & ... & q_n \end{bmatrix} $$

这样的标准正交矩阵有一个很好的性质：  

$$ Q^TQ = \begin{bmatrix} q_1 \\ q_2 \\ ... \\ q_n \end{bmatrix} \begin{bmatrix} q_1 & q_2 & ... & q_n \end{bmatrix} = \begin{bmatrix} 1 & 0 & \cdots & 0 & 0 \\ 0 & 1 & \cdots & 0 & 0 \\ \vdots & \vdots & \ddots & \vdots & \vdots \\ 0 & 0 & \cdots & 1 & 0 \\ 0 & 0 & \cdots & 0 & 1 \end{bmatrix} = I $$

注意这里的标准正交矩阵 Q 可以不是方阵；一个标准正交的方阵我们称之为**正交矩阵 orthogonal matrix**。如果 Q 为方阵，因为 $\,Q^TQ = I\,$，所以 $\,Q^T = Q^{-1}\,$。

正交矩阵不要忘了单位化。例如，$\,\begin{bmatrix} 1 & 1 \\ 1 & -1 \end{bmatrix}\,$，这个矩阵各列是正交的，但并不是正交矩阵，因为没有单位化，正确的正交矩阵是 $\,\frac {1} {\sqrt 2}\begin{bmatrix} 1 & 1 \\ 1 & -1 \end{bmatrix}\,$。由这个矩阵可以延伸出**阿达马矩阵 Adamar Matrix**，这里不做详细介绍。

## 标准正交矩阵的作用
记得上面介绍的投影矩阵 $\,P = A(A^TA)^{-1}A^T\,$，若 A 矩阵是标准正交矩阵 Q 时：  

$$ Q(Q^TQ)^{-1}Q^T = QQ^T $$

特别的，当 Q 时方阵（正交阵）时，由于此时 $\,Q^T = Q^{-1}\,$。所以投影矩阵即为 I。

很多复杂问题使用标准正交向量之后都变得简单。如果基为标准正交，则方程 $\,A^TA \hat {x} = A^Tb\,$ 的解变为 $\,\hat {x} = Q^Tb\,$，$\,\hat {x}\,$ 的分量 $\,\hat {x_i} = q_i^Tb\,$。

## 施密特正交化 Gram-Schmidt
**施密特正交化 Gram-Schmidt Orthogonalization** 即从线性无关向量组入手，将其矩阵标准正交化。

有两个线性无关的向量 a，b。我们想从中得到标准正交向量 $\,q_1\,$，$\,q_2\,$。

Schmidt 给出的结论是如果我们有一组正交基 A 和 B（注意这个小节 A，B，C 均为向量），那么我们令它们除以自己的长度就得到标准正交基：  

$$ q_1 = \frac {A} {|A|}, q_2 = \frac {B} {|B|} $$

Gram 做了重要的工作，在 a 和 b 张成的空间中，将 a 向量定为 A 向量，然后将 b 向量投影到 a 向量上。然后取 B = b - p：  

<div  align="center">  
<img src="https://s2.loli.net/2024/02/22/abOJoXkDYQEpyv2.jpg" width = "40%" height = "40%" alt="图9 - 二维施密特正交化"/>
</div>

即：  

$$ B = b - \cfrac {A^Tb} {A^TA} A $$

验证 A 与 B 是否正交：$\,A^TB = A^T(b - \cfrac {A^Tb} {A^TA} A) = 0\,$，说明 A 与 B 是正交的。接下来通过 $\,q_1 = \cfrac {A} {|A|}, q_2 = \cfrac {B} {|B|}\,$ 单位化各个向量，就得到了 a, b 空间的标准正交基。

---

同样的道理，推广到三维：

<div  align="center">  
<img src="https://s2.loli.net/2024/02/22/AyuORYN4vqm5oCj.jpg" width = "40%" height = "40%" alt="图10 - 三维施密特正交化"/>
</div>

寻找三个正交的向量 A, B, C 的话，其中 A，B 方法不变：

$$ A = a $$
$$ B = b - \cfrac {A^Tb} {A^TA} A $$

而 C 通过将 c 减去在 A, B 上的投影就可以得到：  

$$ C = c - \cfrac {A^Tb} {A^TA} A - \cfrac {B^Tc} {B^TB} B$$

得到三个正交的向量 A, B, C，再进行单位化即可。

---

示例：$\,a = \begin{bmatrix} 1 \\ 1 \\ 1 \end{bmatrix}\,$，$\,b = \begin{bmatrix} 1 \\ 0 \\ 2 \end{bmatrix}\,$，求标准正交矩阵 Q。

$$ A = a = \begin{bmatrix} 1 \\ 1 \\ 1 \end{bmatrix} $$

$$ B = b - \cfrac {A^Tb} {A^TA} A = \begin{bmatrix} 1 \\ 0 \\ 2 \end{bmatrix} - \frac {3} {3} \begin{bmatrix} 1 \\ 1 \\ 1 \end{bmatrix} = \begin{bmatrix} 0 \\ -1 \\ 1 \end{bmatrix} $$

再进行单位化，得到标准正交矩阵 Q：

$$ Q = \begin{bmatrix} q_1 & q_2 \end{bmatrix} = \begin{bmatrix} 1/\sqrt {3} & 0 \\ 1/\sqrt {3} & -1/\sqrt {2} \\ 1/\sqrt {3} & 1/\sqrt {2} \end{bmatrix} $$

观察矩阵 $\,A = \begin{bmatrix} 1 & 1\\ 1 & 0 \\ 1 & 2 \end{bmatrix}\,$ 和矩阵 Q 的列空间，它们是相同的，也就是说我们的正交化过程都是在同一个空间中进行的，只是最后得到了一个更好的标准正交基而已。

从矩阵的角度来看，类似于 A 的 LU 分解，在 Gram-Schmidt 正交化中，A 可分解为 Q 与 R。其中 R 是上三角矩阵：$\,A = QR\,$

$$ A = \begin{bmatrix} a_1 & a_2 \end{bmatrix} $$
$$ Q = \begin{bmatrix} q_1 & q_2 \end{bmatrix} $$
$$ R = \begin{bmatrix} a_1^Tq_1 & a_2^Tq_1 \\ a_1^Tq_2 & a_2^Tq_2 \end{bmatrix} $$

其中 R 中的 $\,a_1^Tq_2\,$ 为 0，这是因为 $\,a_1\,$ 就是 $\,q_1\,$ 的方向，而 $\,q_1\,$ 和 $\,q_2\,$ 为标准正交向量，因此 $\,q_2\,$ 的方向与 $\,a_1\,$ 垂直，因此内积为 0。

R 在 Q 右侧相当于对 Q 做列操作，即 A 的列向量是 Q 列向量的线性组合。


# 第十八课 行列式及其性质
接下来课程进入了下一个部分，之前学习了大量长方形矩阵的性质，现在我们集中讨论方阵的性质，包括**行列式 determinants** 和**特征值 Eigen values**。

## 行列式 Determinants
行列式是跟每个方阵都有关的一个数字。这个数字包含了这个矩阵的很多性质，比如方阵行列式为 0，
则方阵不可逆。矩阵 A 的行列式记作：  

$$ det(A) 或 | A | $$

## 行列式的性质
直接给出 n 阶行列式的公式，则一下子代入了大量信息，并不利于接受这个概念，我们从行列式的三个性质开始讲起，这三个性质定义了行列式。

**性质一**：对于单位阵 I，有：$\,det(I) = 1\,$。

$$ \begin{vmatrix} 1 & 0 \\ 0 & 1 \end{vmatrix} = 1 $$

**性质二**：交换两行后，行列式的值相反。可以推知置换矩阵的行列式是 +1 或者 -1。

$$ \begin{vmatrix} 0 & 1 \\ 1 & 0 \end{vmatrix} = -1 $$

**性质三①**：如果在矩阵的一行乘上 t，则行列式的值就要乘上 t：  

$$ \begin{vmatrix} ta & tb \\ c & d \end{vmatrix} = t\begin{vmatrix} a & b \\ c & d \end{vmatrix} $$

**性质三②**：行列式是一个线性函数，但是这个线性单独反映在每一行上。即：

$$ \begin{vmatrix} a + a' & b + b' \\ c & d \end{vmatrix} = \begin{vmatrix} a & b \\ c & d \end{vmatrix} + \begin{vmatrix} a' & b' \\ c & d \end{vmatrix} $$

---

更多的性质可以从以上的三条性质中推导出来：  

**性质四**：如果矩阵的两行是完全相同的，则它的行列式为 0。

这可以从第二条性质推导出来，因为交换这个相同的两行，行列式应该变号；但是新生成的矩阵跟原矩阵没有区别，因此行列式应该不变，所以有 det = -det，所以 det 等于 0。

**性质五**：从矩阵的行 k 减去另一行的 i 倍，对应的行列式值不发生改变：  

$$ \begin{align*} \begin{vmatrix} a & b \\ c - ta & d - tb \end{vmatrix} &= \begin{vmatrix} a & b \\ c & d \end{vmatrix} - \begin{vmatrix} a & b \\ ta & tb \end{vmatrix} \\ &= \begin{vmatrix} a & b \\ c & d \end{vmatrix} - t\begin{vmatrix} a & b \\ a & b \end{vmatrix} \\ &= \begin{vmatrix} a & b \\ c & d \end{vmatrix} \end{align*} $$

**性质六**：如果有一行为零，那么 A 的行列式为 0： 

这个性质很简单，让性质 3 中的 t = 0，行列式值也为 0。

**性质七**：上三角矩阵对应的行列式的值等于其对角线上元素的乘积。  

性质五告诉我们行消元的过程，行列式的数值没有发生变化，即三角阵通过行消元法得到对角阵的行列式不变；性质三①告诉我们对角阵的行列式等于其主元的乘积再乘以单位阵的行列式；性质一表明单位阵行列式为 1。故有：  

$$ \begin{align*} \begin{bmatrix} d_1 & * & * & \cdots & * \\ 0 & d_2 & * & \cdots & * \\ 0 & 0 & \ddots & \ddots & * \\ \vdots & \vdots & \ddots & \ddots & \vdots \\ 0 & 0 & \cdots & \cdots & d_n \end{bmatrix} &= \begin{bmatrix} d_1 & 0 & 0 & \cdots & 0 \\ 0 & d_2 & 0 & \cdots & 0 \\ 0 & 0 & \ddots & \ddots & 0 \\ \vdots & \vdots & \ddots & \ddots & \vdots \\ 0 & 0 & \cdots & \cdots & d_n \end{bmatrix} \\ &= d_1d_2 \cdots d_n \begin{bmatrix} 1 & 0 & 0 & \cdots & 0 \\ 0 & 1 & 0 & \cdots & 0 \\ 0 & 0 & \ddots & \ddots & 0 \\ \vdots & \vdots & \ddots & \ddots & \vdots \\ 0 & 0 & \cdots & \cdots & 1 \end{bmatrix} \\ &= d_1d_2 \cdots d_n \end{align*} $$

**性质八**：当且仅当矩阵 A 为奇异矩阵时，其行列式为 0。当且仅当 A 可逆，行列式不为 0。  

如果矩阵 A 为奇异阵，则必可通过消元法使得矩阵的某行全等于零，则按照性质六，A 的行列式为 0。如果其不是奇异阵，则通过消元可以得到一个上三角矩阵，且其主元均不为 0，则按照性质七，行列式的数值等于主元的乘积也不等于 0。

> 计算非奇异矩阵的行列式有确切的公式，但通常计算机是靠消元的方法来转化为三角阵，然后将主元相乘来进行计算的。

**性质九**：方阵乘积的行列式 = 方阵行列式的乘积，即：$\,|AB| = |A||B|\,$。

由此结论可知：  
①可逆矩阵的行列式与其逆矩阵的行列式互为倒数：$\,AA^{-1} = I \rightarrow |A||A^{-1}| = 1\,$  

②矩阵平方的行列式等于矩阵行列式的平方：$\,|A^2| = (|A|)^2\,$  

③$\,|kA| = k^n|A|\,$，其中 k 为常数，A 为 n 阶矩阵，提出了每一行中的 k。

**性质十**：$\,|A^T| = |A|\,$。

证明：矩阵消元可得 $\,A = LU\,$，则 $\,A^T = U^TL^T\,$，由性质九可知 $\,|A| = |L||U|\,$，$\,|A^T| = |L^T||U^T|\,$。第四课中的 LU 分解中介绍过，L 是一个主对角线全为 1 的下三角矩阵(因为消元过程总是向下消元)。而 U 是一个上三角矩阵。很明显。像 U,L 这样的上/下三角矩阵，不论转置与否，其行列式都为对角线上各元素乘积，即 $\,|L^T| = |L|\,$，$\,|U^T| = |U|\,$。故$\,|A^T| = |A|\,$

因为性质十成立，交换行和交换列本质上没什么区别，之前的性质都可以应用在列变换上。

> 这一课结尾时，教授提到了行交换的奇偶问题，这个问题很重要，因为行交换的奇偶性会影响最终值的正负号，所以置换矩阵行列式的正负性受其行交换次数影响。


# 第十九课 行列式公式和代数余子式
