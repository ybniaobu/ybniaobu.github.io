---
title: Custom SRP 接入 Unity APV（一）
date: 2025-12-14 19:52:47
categories: 
  - [图形学]
  - [unity, pipeline]
tags:
  - 图形学
  - 游戏开发
  - unity
top_img: /images/black.jpg
cover: https://s2.loli.net/2025/12/14/nqFkiKMduaWEc13.jpg
description: 本笔记的主要内容有 XXXXXXXXXXXXX。
---

> 在 YPipeline 中实现了 SSAO 相关算法之后，本想直接开始实现 SSGI（已经鸽了无数次了，笑）。然而，由于屏幕空间光照信息的缺失，屏幕空间的全局光照算法的效果较不稳定。所以最好的方式是将 SSGI 和其他基于世界空间的预烘焙全局光照技术相互结合，SSGI 来补充预烘焙光照缺失的高频信息。而之前 YPipeline 只实现了 Unity 内置的 Light Map 和 Light Probe Groups，然而这两个技术都是 Per Object 的，无法直接作为 SSGI 的 Fallback，为此我打算先接入 Per Pixel 的**自适应探针体积 Adaptive Probe Volumes (APV)**，当然 Reflection Probe 作为 SSGI fallback 也是可以的，但是 YPipeline 目前也只支持了 Per Object 的 Reflection Probe，也暂时无法使用，并且 Reflection Probe 作为 fallback 会有跳变的缺点，故我选择先了解和实现 APV。实现 Per Pixel 的 Reflection Probe 我打算在后面实现镜面反射全局光照算法时（比如 SSR 等）一同解决。APV 除了和 SSGI 结合实现更好的 Hybrid Diffuse Global Illumination 效果外，也可以为日后理解 **PRTGI（Precomputed Radiance Transfer）**甚至是 **DDGI（Dynamic Diffuse Global Illumination）** 打下一定的基础。

# APV 介绍
Unity APV 全名 **Adaptive Probe Volumes**，本质上属于 **Irradiance Volume** 技术。故这里先介绍 Irradiance Volume，参考的资料有如下：  

> **① Shirley, Peter. “The Irradiance Volume.” IEEE Computer Graphics and Applications, 1998.** ：https://www.sci.utah.edu/~bigler/images/msthesis/The%20irradiance%20volume.pdf ；  
> ② Irradiance Volumes for Games（GDC 2005）：https://www.chrisoat.com/papers/Oat_GDC2005_IrradianceVolumesForGames.pdf ；  
> ③ Volumetric Global Illumination At Treyarch（SIGGRAPH 2016）：https://www.activision.com/cdn/research/Volumetric_Global_Illumination_at_Treyarch.pdf 。


## Irradiance Volume


## 如何使用 APV
https://advances.realtimerendering.com/s2022/SIGGRAPH2022-Advances-Enemies-Ciardi%20et%20al.pdf



# 在 SRP 中接入 APV

## CPU 中的工作

## GPU 中的工作