---
title: Unity Custom SRP 基础（七）
date: 2025-04-07 20:57:36
categories: 
  - [图形学]
  - [unity, pipeline]
tags:
  - 图形学
  - 游戏开发
  - unity
top_img: /images/black.jpg
cover: https://s2.loli.net/2025/04/07/2zi6pj3XtAPHvmy.gif
mathjax: true
description: 本笔记的主要内容包含XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX。
---

> 本笔记是关于 Unity 的**自定义可编程渲染管线**的入门基础，即 **SRP (Scriptable Rendering Pipeline)**，主要参考了著名的教程 https://catlikecoding.com/ 的 Custom SRP Tutorial，以及知乎上各位图形学大神们的文章。  
>    
> 笔者使用的 Unity 版本是 6000.0.27f1，Core RP Library 的版本是 17.0.3。

# Particles
Unity 自带的**内置 Particle System** 大部分工作都是 CPU 计算的，而实现项目 CPU 瓶颈居多，所以它只适用于一些只使用少量粒子（数千以内）的简单特效，比如烟雾、火焰、爆炸等。而 **Visual Effect Graph** 是基于 GPU 计算，适合需要高质量、复杂粒子效果的场景。教程中只涉及内置 Particle System，没有涉及如何接入 Visual Effect Graph，需要自行研究如何接入。

其实什么都不用做就已经可以使用 Particle System 了，通过 GameObject / Effects / Particle System 创建即可。Particle System 可以使用任意材质，只不过使用并非专门为内置粒子系统而写的任意材质会带有一定的限制。教程中也只涉及 Particle System 的 Unlit Shader，不涉及 Particle Lit Shader ，但 Lit 跟 Unlit 类似，只是多了光照计算等，可以查阅 URP 或 HDRP。

## Unlit Particles Shader
我们先将自己的 Unlit Shader 全部复制出来，新建一个 ParticlesUnlit.Shader 然后粘贴进去，将 Shader 菜单路径改一下就行：  

    Shader "Custom RP/Particles/Unlit"
    {
        ...
    }

顺便提一下，对于内置粒子系统，GPU instancing 是不起作用的。然后将自己的 ParticlesUnlit.Shader 附给 Particle System 的 Renderer 就可以渲染粒子了：  

<div  align="center">  
<img src="https://s2.loli.net/2025/04/09/1dkv7G9OBUXMqi4.jpg" width = "50%" height = "50%" alt="图115 - 使用了一张圆形渐变的贴图的 billboard particles"/>
</div>

