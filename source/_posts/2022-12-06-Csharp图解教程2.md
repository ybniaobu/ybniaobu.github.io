---
title: 《C#图解教程》读书笔记（二）
date: 2022-12-06 16:34:24
categories: 
  - [C#, C#读书笔记]
tags:
  - .net
  - C#
  - 读书笔记
top_img: /images/black.jpg
cover: https://s2.loli.net/2022/12/15/TYXrac2oJnPlM1E.png
---

> 该笔记为 **《C#图解教程》** 的读书笔记，读书笔记仅为知识的记录，方便后续查找；  
> 学习完成日期为XXXX年XX月XX日。  
> 本篇主要内容为：XXXXXXXXXXXXX。

<div  align="center">  
<img src="https://s2.loli.net/2022/10/31/VLR94de6aqA3WPw.jpg" width = "80%" height = "80%" alt="C#图解教程"/>
</div>

# 第九章 表达式和运算符
## 表达式 Expressions
**运算符 operator** 是一个符号，表示返回单个结果的操作。**操作数 operand** 指作为运算符输入的数据元素。**表达式 expression** 是运算符和操作数的字符串。比如 `a + b + c + d` 有3个运算符和4个操作数。

**表达式求值 Evaluating an expression** 是将每个运算符以适当的顺序应用到它的操作数以产生一个值得过程。值被返回到表达式求值的位置。除了返回值，一些表达式可能还会在内存中设置一个值。

## 字面量 Literals
**字面量**是源代码中键入的数字或字符串。

``` C#
static void Main()
{
    Console.WriteLine("{0}", 1024); //整数字面量
    Console.WriteLine("{0}", 3.1416); //双精度型字面量
    Console.WriteLine("{0}", 3.1416F); //浮点型字面量
    Console.WriteLine("{0}", true); //布尔型字面量
    Console.WriteLine("{0}", 'x'); //字符型字面量
    Console.WriteLine("{0}", "Hi there"); //字符串字面量
}
```

① bool 有两个字面量：true 和 false ，注意和所有 C# 关键字一样，它们都是小写。  
② 对于引用类型变量，字面量 null 表示变量没有指向内存中的数据。

### 整数字面量 Integer Literals
整数字面量被书写为十进制数字序列，没有小数点，带有可选的后缀，指明整数的类型。

比如以下四个字面量：  
`236 //整数`  
`236L //长整数`  
`236U //无符号整数`  
`236UL //无符号长整数`  

整数类型字面量还可以写成十六进制 hex 形式，以 0x 或 0X 为前缀，实际数据类型用后缀指定。也可以写成二进制记法，以 0b 或 0B 为前缀，实际数据类型用后缀指定。

若没有后缀，编译器会把数字字符串解释为能表示该值而不丢失数据的相应类型的最小类型，比如236和5000000000都没有后缀，236会被解释为一个 int ，5000000000会被解释为一个 long 。

可以在数字字面量插入分隔符：`5_000_000_000`。

| 后缀 | 整数类型 | 备注 |
| :---- | :---- | :---- |
| 无 | int, uint, long, ulong | |
| U, u | uint, ulong | |
| L, l | long, ulong | 不推荐使用小写字母l，会和数字1混淆
| ul, uL, Ul, UL, lu, Lu, lU, LU | ulong | 不推荐使用小写字母l，会和数字1混淆 |

### 实数字面量 Real Literals
C# 有三种实数数据类型：float、double 和 decimal ，分别对应32位、64位和128位精度，都是浮点数据类型，实际使用中，double 最常用。

实数字面量包括十进制数字；一个可选的小数点；一个可选的指数部分 E 或 e ；一个可选的后缀：  
`float f1 = 236F;`  
`double d1 = 236.714;`  
`double d2 = .35192;`  
`double d3 = 6.338e-26;`

| 后缀 | 实数类型 |
| :---- | :---- |
| 无 | double |
| F, f | float |
| D, d | double |
| M, m | decimal |

> 注意：无后缀的实数字面量是 double 类型，而不是 float 类型！！！

### 字符字面量 Character Literals
**字符字面量**由**两个单引号**内的字符组成，用于表示单个字符(a)、非打印字符(\n换行符)或者执行特殊任务的字符，比如转义 escape (\\)。

尽管可能需要多个字符来表示一个字符字面量，但是每个字符字面量只表示一个字符，要引入多个字符，必须使用字符串字面量。

字符字面量可以是以下任意一种：  
`char c1 = 'd'; //单个字符`  
`char c2 = '\n'; //简单转义序列`  
`char c3 = '\x0061'; //十六进制转义序列`  
`char c4 = '\u005a'; //Unicode转义序列`  

①字符字面量的类型是 **char** ；  
②简单转义序列是一个反斜杠后面跟着单个字符；  
③十六进制转义序列是一个反斜杠后面跟着 X 或 x，后面4个十六进制数字；  
④Unicode 转义序列是一个反斜杠后面跟着 U 或 u，后面4个十六进制数字。

| 名称 | 转义序列 | 十六进制编码 |
| :---- | :---- | :---- |
| 空字符 Null | \0 | 0x0000 |
| 警告 Alert | \a | 0x0007 |
| 退格符 Backspace | \b | 0x0008 |
| 水平制表符 Horizontal tab | \t | 0x0009 |
| 换行符 New line | \n | 0x000A |
| 垂直制表符 Vertical tab | \v | 0x000B |
| 换页符 Form feed | \f | 0x000C |
| 回车符 Carriage return | \r | 0x000D |
| 双引号 Double quote | \" | 0x0022 |
| 单引号 Single quote | \' | 0x0027 |
| 反斜杠 Backslash | \\ | 0x005C |

### 字符串字面量 String Literals
**字符串字面量**使用**双引号**标记，不同于字符字面量使用单引号。

字符串字面量有两种类型：①**常规字符串字面量 Regular string literals**；②**逐字字符串字面量 Verbatim string literals**。

常规字符串字面量可以包含：字符、简单转义序列、十六进制转义序列和Unicode转义序列。例如：  
`string st1 = "Hi there!";`  
`string st2 = "Val1\t5, Val2\t10";`  
`string st3 = "Add\x000ASome\u0007Interest";`

逐字字符串字面量是以 @ 字符为前缀的常规字符串字面量，逐字字符串字面量中字符串不会被转义。逐字字符串字面量的唯一例外就是相邻的双引号组，被解释为单个双引号字符。

``` C#
string rst1 = "Hi there!";
string vst1 = @"Hi there!";

string rst2 = "It started, \"Four score and seven...\"";
string vst2 = @"It started, ""Four score and seven...""";

string rst3 = "Value 1 \t 5, Val2 \t 10";
string vst3 = @"Value 1 \t 5, Val2 \t 10";

string rst4 = "C:\\Program Files\\Microsoft\\";
string vst4 = @"C:\Program Files\Microsoft\";

string rst5 = " Print \x000A Multiple \u000A Lines";

string vst5 = @" Print
Multiple
Lines";
```

打印这些字符串会产生以下输出：

``` console
Hi there!
Hi there!

It started, "Four score and seven..."
It started, "Four score and seven..."

Value 1 5, Val2 10
Value 1 \t 5, Val2 \t 10

C:\Program Files\Microsoft\
C:\Program Files\Microsoft\

Print
Multiple
Lines

Print
Multiple
Lines
```

## 求值顺序
表达式可以有很多嵌套的子表达式构成，求值顺序可以是表达式最终值发生变化。

### 优先级
优先级从高到低如下表所示：

| 分类 | 运算符 |
| :---- | :---- |
| 初级运算符 <font face= "Arial"> Primary </font> | <font face= "Arial"> a.x, f(x), a[x], x + +, x - -, new, typeof, checked, unchecked </font> |
| 一元运算符 <font face= "Arial">Unary</font> | <font face= "Arial">+, -, !, ~, + + x, - - x, (T)x</font> |
| 乘法 <font face= "Arial">Multiplicative</font> | <font face= "Arial"> *, /, % </font> |
| 加法 <font face= "Arial">Additive</font> | <font face= "Arial">+, -</font> |
| 移位 <font face= "Arial">Shift</font> | <font face= "Arial"><<, >></font> |
| 关系和类型 <font face= "Arial">Relational and type</font> | <font face= "Arial"><, >, <=, >=, is, as</font> |
| 相等 <font face= "Arial">Equality</font> | <font face= "Arial">==, !=</font> |
| 位与 <font face= "Arial">Logical AND</font> | <font face= "Arial">&</font> |
| 位异或 <font face= "Arial">Logical XOR</font> | <font face= "Arial">^</font> |
| 位或 <font face= "Arial">Logical OR</font> | <font face= "Arial">&#124;</font> |
| 条件与 <font face= "Arial">Conditional AND</font> | <font face= "Arial">&&</font> |
| 条件或 <font face= "Arial">Conditional OR</font> | <font face= "Arial">&#124;&#124;</font> |
| 条件选择 <font face= "Arial">Conditional</font> | <font face= "Arial">?:</font> |
| 赋值运算符 <font face= "Arial">Assignment</font> | <font face= "Arial">=, *=, /=, %=, +=, -=, <<=, >>=, &=, ^=, &#124;=</font> |

### 结合性 Associativity
如果有连续的运算符有相同的优先级别，求值顺序由**操作结合性 operator associativity** 决定，比如 `2/6*4` 求值顺序有2种。

运算符结合性重要特征：①左结合运算符从左至右求值；②右结合运算符从右至左求值；  

| 运算符类型 | 结合性 |
| :---- | :---- |
| 赋值运算符 | 右结合 |
| 其他二元运算符 | 左结合 |
| 条件运算符 | 右结合 |

所以 `2/6*4` 应该是从左到右，得到 4/3 。

可以直接使用**圆括号**来显式地设定子表达式求值顺序，并覆盖优先级和结合性规则。

## 简单算术运算符
简单算术运算符包括 `+` 、`-` 、`*` 、`/` 。这些运算符都是二元左结合运算符。对于除法，要注意整数除法，直接截取整数部分。

## 求余运算符
