---
title: GAMES101-图形学入门公开课笔记（一）
date: 2024-04-05 19:16:20
categories: 
  - [图形学]
tags:
  - 图形学
  - 游戏开发
top_img: /images/black.jpg
cover: https://s2.loli.net/2024/04/05/bQhEat4gmx9UWIX.gif
mathjax: true
description: 本笔记的主要内容为 GAMES101 的第一课到第xx课，包括XXXXXXX
---

> GAMES101 是一门现代计算机图形学入门课程，全名为**现代计算机图形学入门**，本课程将全面而系统地介绍现代计算机图形学的四大组成部分：①光栅化成像，②几何表示，③光的传播理论，以及④动画与模拟。由加州大学圣芭芭拉分校 UCSB 的闫令琪教授讲解，他的科研成果被直接应用于工业界，如影片《猩球崛起3：终极之战》与《狮子王2019》，以及与 NVIDIA 合作推动了实时光线追踪技术的产生。  
> b 站视频 BV 号：BV1X7411F744

# 第一课 Overview of Computer Graphics
GAMES101 课程的主要内容为：  
①**Rasterization 光栅化**，即将**几何图元 geometry primitives**（包括线段、直线、射线、平面、多边形等），转换为**片元 fragments**（**像素 pixels**）并投影在屏幕上；  
②**Curves and Meshes**，几何相关内容，即如何在电脑中表示**几何 geometry**；  
③**Ray Tracing** 光线追踪，从相机发射经过每个像素的射线，计算交接 intersection 和着色 shading，直到光线反射到光源；  
④**Animation / Simulation** 包括 **key-frame Animation 关键帧动画** 和 **Mass-spring System 质量弹簧系统**（用于 **cloth simulation 布料仿真模拟**）

# 第二课 Review of Linear Algebra
向量、矩阵乘法内容都比较基础，不多做记录了，这里只补充一下数学运算定律相关内容：  
①向量点乘满足交换律、分配律和结合律：  
&emsp;&emsp; - $\,a \cdot b = b \cdot a\,$  
&emsp;&emsp; - $\,a \cdot (b + c) = a \cdot b + a \cdot c\,$  
&emsp;&emsp; - $\,(ka) \cdot b = a \cdot (kb) = k(a \cdot b)\,$  
②向量点乘不满足交换律，满足分配律和结合律：  
&emsp;&emsp; - $\,a \times b = - b \times a\,$  
&emsp;&emsp; - $\,a \times (b + c) = a \times b + a \times c\,$  
&emsp;&emsp; - $\,(ka) \times b = a \times (kb) = k(a \times b)\,$  
③矩阵与矩阵乘法不满足交换律，满足分配律和结合律：  
&emsp;&emsp; - $\,AB \neq BA\,$  
&emsp;&emsp; - $\,(AB)C = A(BC)\,$  
&emsp;&emsp; - $\,A(B + C) = AB + AC\,$  
&emsp;&emsp; - $\,(A + B)C = AC + BC\,$  

---

向量叉乘可以表示为矩阵形式：  

$$ a \times b = Ab = \begin{bmatrix} 0 & -z_a & y_a \\ z_a & 0 & -x_a \\ -y_a & x_a & 0 \end{bmatrix} \begin{bmatrix} x_b \\ y_b \\ z_b \end{bmatrix} = \begin{bmatrix} y_az_b - y_bz_a \\ x_bz_a - x_az_b \\ x_ay_b - y_ax_b \end{bmatrix} $$

其他内容若忘了，可以看 [Unity 基础 - 三维数学基础](https://ybniaobu.github.io/2023/07/09/2023-07-09-Unity%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%9D%82%E8%AE%B0/#三维数学基础)


# 第三课 Transformation
①缩放变换 Scale (Non-Uniform)

$$ \begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} s_x & 0 \\ 0 & s_y \end{bmatrix} \begin{bmatrix} x \\ y \end{bmatrix} $$

②镜像变换 Reflection (Horizontal)

$$ \begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} -1 & 0 \\ 0 & 1 \end{bmatrix} \begin{bmatrix} x \\ y \end{bmatrix} $$

③切变变换 Shear

<div  align="center">  
<img src="https://s2.loli.net/2024/04/15/HE1leN7pULujac2.png" width = "60%" height = "60%" alt="图1 - Shear"/>
</div>

$$ \begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} 1 & a \\ 0 & 1 \end{bmatrix} \begin{bmatrix} x \\ y \end{bmatrix} $$

④旋转变换 Rotation (Counterclockwise)

$$ \begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} cos \theta & -sin \theta \\ sin \theta & cos \theta \end{bmatrix} \begin{bmatrix} x \\ y \end{bmatrix} $$

---

齐次坐标相关内容不多做记录了。知道一下 **Affine Transformations 仿射变换**（仿射映射）就是一个向量空间进行一次线性变换并接上一个平移，变换为另一个向量空间。即 Affine map = linear map + translation。

还有一个关于齐次坐标的要注意一下，因为齐次坐标的向量是 $\,(x, y ,0)^T\,$，坐标点是 $\,(x, y ,1)^T\,$。而向量加上向量得到的是 $\,(x', y' ,0)^T\,$ 也为向量，点减去点是 $\,(x', y' ,0)^T\,$ 为向量，点加上向量得到的是 $\,(x', y' ,1)^T\,$ 为点。这些都符合定义。但是点加上点，却没有意义，这样会得到 $\,(x', y' ,2)^T\,$，为了扩充定义，若 $\,w \neq 0 \,$，则在齐次坐标下的 $\,(x, y ,w)^T\,$ 表示的都是点 $\,(x/w, y/w ,1)^T\,$。这样在齐次坐标下，点加上点得到的是两个点的中点。


# 第四课 Transformation II
## 3D Transformation
**①Rotation around x-, y-, or z-axis**  

$$ R_x(\alpha) = \begin{bmatrix} 1 & 0 & 0 & 0 \\ 0 & cos \alpha & -sin \alpha & 0 \\ 0 & sin \alpha & cos \alpha & 0 \\ 0 & 0 & 0 & 1 \end{bmatrix} $$

$$ R_y(\alpha) = \begin{bmatrix} cos \alpha & 0 & sin \alpha & 0 \\ 0 & 1 & 0 & 0 \\ -sin \alpha & 0 & cos \alpha & 0 \\ 0 & 0 & 0 & 1 \end{bmatrix} $$

$$ R_z(\alpha) = \begin{bmatrix} cos \alpha & -sin \alpha & 0 & 0 \\ sin \alpha & cos \alpha & 0 & 0 \\ 0 & 0 & 1 & 0 \\ 0 & 0 & 0 & 1 \end{bmatrix} $$

左右手系旋转矩阵都是一样的，但**右手坐标系逆时针旋转为正，左手坐标系顺时针旋转为正**。

**②罗德里格旋转公式 Rodrigues’ Rotation Formula**

设 v 是一个三维空间向量，k 是旋转轴的单位向量，则 v 在右手螺旋定则意义下绕旋转轴 k 旋转角度 θ 得到的向量可以由三个不共面的向量，即原向量，旋转轴及它们叉积表示：  

$$ v_{rotation} = cos \theta v + (1 - cos \theta)(v \cdot k) k + sin \theta k \times v $$

矩阵形式表示为：  

$$ R(k, \theta) = cos \theta I + (1 - cos \theta)kk^T + sin \theta \begin{bmatrix} 0 & -z_a & y_a \\ z_a & 0 & -x_a \\ -y_a & x_a & 0 \end{bmatrix} $$

这里的旋转 θ 角度指的是向量 v 投影至垂直于 ($\,\bot\,$) 旋转轴的分量旋转的角度，平行于 ($\,||\,$) 旋转轴的分量不变。

<div  align="center">  
<img src="https://s2.loli.net/2024/04/15/4KGFNwOS5gIu1qQ.png" width = "30%" height = "30%" alt="图2 - Rodrigues’ Rotation"/>
</div>

> 这节课不说四元数，但是老师补充了一句是：比如矩阵旋转 25 度，和旋转 5 度，矩阵平均不能得到 15 度，即矩阵不能插值。但是四元数可以，方便了计算。

## Viewing transformation
Viewing transformation 观测变换，包括：  
①View/ Camera transformation 观察变换；  
②Projection transformation 投影变换  
&emsp;&emsp; - Orthographic projection 正交投影  
&emsp;&emsp; - Perspective projection 透视投影

这些内容《Unity Shader入门精要》都有讲，不再重复说明了。冯乐乐没提到的就是，观察变换其实就是摄像机空间，即摄像机自己的模型空间，转换到世界空间的逆矩阵，而观察变换不考虑缩放，若只考虑向量方向的话，直接转置就是逆矩阵，因为旋转矩阵是正交矩阵。这和冯乐乐提到的观察矩阵的理解的两种方法逻辑是一样的，忘了可以回去看看。

透视投影其实就是把远平面“挤压”到近平面的大小，然后再做正交投影。这个挤压其实就是一个线性函数关系。






